<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Analysis Results | AI Resume Analyzer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar">
    <div class="nav-left">
        <img src="{{ url_for('static', filename='logo.png') }}" class="logo-img">
        <span class="brand">AI Resume & Job Match Analyzer</span>
    </div>

    <div class="nav-right">
        <a href="/">Home</a>
        <a href="/analyze">Analyzer</a>
        <a href="/results" class="active">Results</a>
        <a href="https://rxresu.me/" target="_blank" class="highlight-link">Fix Resume</a>
    </div>
</nav>

<!-- PRIVACY -->
<div class="privacy-banner">
    ğŸ”’ We do not store resumes or job descriptions. All data is deleted immediately after analysis.
</div>

<div class="container fade-in">

{% if result %}

<!-- CAREER WARNING -->
{% if result.resume_role and result.jd_role and result.resume_role != result.jd_role %}
<div class="career-warning">
    âš ï¸ <strong>Career Mismatch Detected</strong><br>
    Your resume aligns more with a <strong>{{ result.resume_role | capitalize }}</strong> role,
    while this job targets a <strong>{{ result.jd_role | capitalize }}</strong> profile.
</div>
{% endif %}

<!-- JOB FIT -->
<div class="job-fit-card">
    <h3>ğŸ¯ Job Fit Recommendation</h3>
    <span class="job-fit {{ result.job_fit | lower | replace(' ', '-') }}">
        {{ result.job_fit }}
    </span>
</div>

<!-- ATS OVERVIEW -->
<div class="card result-card">
    <h2>ğŸ“Š ATS Match Overview</h2>

    <div class="score-ring">
        <svg width="120" height="120">
            <circle cx="60" cy="60" r="50"></circle>
            <circle cx="60" cy="60" r="50"
                class="progress"
                style="stroke-dashoffset: {{ 314 - (result.ats_score * 3.14) }}">
            </circle>
        </svg>
        <div class="score-text">{{ result.ats_score }}%</div>
    </div>

    <p class="summary-text">
        Your resume matches <strong>{{ result.ats_score }}%</strong> of this jobâ€™s ATS requirements.
        Focus on high-impact fixes to improve your chances.
    </p>
</div>

<!-- SKILLS -->
<div class="card">
    <h2>ğŸ§© Skill Comparison</h2>

    <div class="skill-columns">
        <div class="skill-box">
            <h3>âœ… You Have</h3>
            {% for skill in result.matched_skills %}
                <span class="skill matched">{{ skill }}</span>
            {% else %}
                <p class="muted">No strong skill matches detected</p>
            {% endfor %}
        </div>

        <div class="skill-box">
            <h3>âŒ Role Requires</h3>
            {% for skill in result.missing_skills %}
                <span class="skill missing">{{ skill }}</span>
            {% else %}
                <p class="muted">You meet all core requirements ğŸ‰</p>
            {% endfor %}
        </div>
    </div>
</div>

<!-- IMPROVEMENT SUMMARY -->
<div class="card stats-card">
    <h2>ğŸ“ˆ Improvement Summary</h2>

    <div class="stats-grid">
        <div class="stat-box">
            <span class="stat-num">{{ result.improvement_stats.resume_fixes }}</span>
            <span class="stat-label">Resume Fixes</span>
        </div>
        <div class="stat-box">
            <span class="stat-num">{{ result.improvement_stats.career_gaps }}</span>
            <span class="stat-label">Career Gaps</span>
        </div>
        <div class="stat-box">
            <span class="stat-num">{{ result.improvement_stats.high_priority }}</span>
            <span class="stat-label">High Priority</span>
        </div>
    </div>
</div>

<!-- IMPROVEMENT PLAN -->
<div class="card">
    <h2>ğŸš€ Improvement Plan</h2>

    {% for item in result.ai_improvements %}
    <div class="improve-card">
        <h3>{{ item.area }}</h3>

        <div class="improve-meta">
            <span class="pill priority-{{ item.priority|lower }}">{{ item.priority }} Priority</span>
            <span class="pill impact-{{ item.expected_impact|lower }}">{{ item.expected_impact }} Impact</span>
            <span class="pill effort-{{ item.effort|lower }}">{{ item.effort }} Effort</span>
            <span class="gap-label {{ item.gap_type | lower | replace(' ', '-') }}">
                {{ item.gap_type }}
            </span>
        </div>

        {% if item.why_missing %}
        <p><strong>Why this matters:</strong> {{ item.why_missing }}</p>
        {% endif %}

        {% if item.how_to_fix %}
        <p><strong>How to fix:</strong> {{ item.how_to_fix }}</p>
        {% endif %}

        {% if item.example_bullet %}
        <div class="example-box">
            <strong>Example resume bullet:</strong>
            <pre>{{ item.example_bullet }}</pre>
        </div>
        {% endif %}
    </div>
    {% else %}
        <p class="muted">No improvement suggestions available.</p>
    {% endfor %}
</div>

<!-- RESUME TAILORING CTA -->
<div class="card cta-card">
    <h2>âœï¸ Tailor Your Resume for This Role</h2>
    <p>
        See exactly what to improve â€” without auto-writing your resume.
        Safe for recruiters. Optimized for ATS.
    </p>
    <a href="/tailor" class="cta-btn">ğŸ” Open Resume Tailoring Advisor</a>
</div>

<!-- JOB RECOMMENDATIONS -->
<div class="card">
    <h2>ğŸ’¼ Jobs Youâ€™re Likely to Get</h2>

    {% for job in result.recommended_jobs %}
    <div class="job-card">
        <strong>{{ job.title }}</strong><br>
        <span class="muted">{{ job.company }} â€¢ {{ job.location }}</span>

        <div class="job-meta">
            <span class="pill match">{{ job.score }}% Match</span>
            <a href="{{ job.url }}" target="_blank" class="apply-btn">Apply</a>
        </div>
    </div>
    {% else %}
        <p class="muted">
            No very high-fit roles yet. Improve your resume and recheck â€” results update instantly.
        </p>
    {% endfor %}
</div>

<div class="info-banner">
    ğŸ’¡ Job recommendations are based on your <strong>resume profile</strong>,
    not the pasted job description.
</div>

{% endif %}

<footer>
    <p>
        Â© 2025 â€¢ Built by <strong>Hemant Solanki</strong><br>
        AI Resume & Career Decision Platform
    </p>
</footer>

</div>
</body>
</html>
